"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[9214],{80430:(e,n,a)=>{a.d(n,{j:()=>i});var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetCatalogsByUserQuery"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"userId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"pagingOptions"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"CatalogPagingOptionsInput"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"type"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"CatalogType"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"withCatalogDetails"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"readingList"},name:{kind:"Name",value:"getPredefinedCatalog"},arguments:[{kind:"Argument",name:{kind:"Name",value:"userId"},value:{kind:"Variable",name:{kind:"Name",value:"userId"}}},{kind:"Argument",name:{kind:"Name",value:"type"},value:{kind:"EnumValue",value:"READING_LIST"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"FragmentSpread",name:{kind:"Name",value:"GetCatalogsByUserReadingList_catalog"}}]}},{kind:"Field",name:{kind:"Name",value:"catalogsByUser"},arguments:[{kind:"Argument",name:{kind:"Name",value:"userId"},value:{kind:"Variable",name:{kind:"Name",value:"userId"}}},{kind:"Argument",name:{kind:"Name",value:"pagingOptions"},value:{kind:"Variable",name:{kind:"Name",value:"pagingOptions"}}},{kind:"Argument",name:{kind:"Name",value:"type"},value:{kind:"Variable",name:{kind:"Name",value:"type"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"catalogs"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"GetCatalogsByUserCatalogs_catalog"}}]}},{kind:"Field",name:{kind:"Name",value:"paging"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"nextPageCursor"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"WithToggleInsideCatalog_catalog"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Catalog"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"version"}},{kind:"Field",name:{kind:"Name",value:"predefined"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"CatalogAddToListItem_catalog"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Catalog"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"visibility"}},{kind:"Field",name:{kind:"Name",value:"predefined"}},{kind:"Field",name:{kind:"Name",value:"version"}},{kind:"FragmentSpread",name:{kind:"Name",value:"WithToggleInsideCatalog_catalog"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"CatalogAddToList_catalog"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Catalog"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"CatalogAddToListItem_catalog"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"userUrl_user"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"customDomainState"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"live"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"domain"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"hasSubdomain"}},{kind:"Field",name:{kind:"Name",value:"username"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"isUserVerifiedBookAuthor_user"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"verifications"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isBookAuthor"}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"getCatalogSlugId_Catalog"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Catalog"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"formatItemsCount_catalog"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Catalog"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"postItemsCount"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"PreviewCatalogCovers_catalogItemV2"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"CatalogItemV2"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"catalogItemId"}},{kind:"Field",name:{kind:"Name",value:"entity"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"visibility"}},{kind:"Field",name:{kind:"Name",value:"previewImage"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"alt"}}]}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"CatalogsListItemCovers_catalog"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Catalog"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"listItemsConnection"},name:{kind:"Name",value:"itemsConnection"},arguments:[{kind:"Argument",name:{kind:"Name",value:"pagingOptions"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"limit"},value:{kind:"IntValue",value:"10"}}]}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"catalogItemId"}},{kind:"FragmentSpread",name:{kind:"Name",value:"PreviewCatalogCovers_catalogItemV2"}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"catalogUrl_catalog"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Catalog"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"predefined"}},{kind:"FragmentSpread",name:{kind:"Name",value:"getCatalogSlugId_Catalog"}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"userUrl_user"}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"CatalogContentNonCreatorMenu_catalog"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Catalog"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"viewerEdge"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"clapCount"}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"catalogUrl_catalog"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"UpdateCatalogDialog_catalog"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Catalog"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"description"}},{kind:"Field",name:{kind:"Name",value:"visibility"}},{kind:"Field",name:{kind:"Name",value:"type"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"CatalogContentCreatorMenu_catalog"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Catalog"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"visibility"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"description"}},{kind:"Field",name:{kind:"Name",value:"type"}},{kind:"Field",name:{kind:"Name",value:"postItemsCount"}},{kind:"Field",name:{kind:"Name",value:"predefined"}},{kind:"Field",name:{kind:"Name",value:"disallowResponses"}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"userUrl_user"}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"UpdateCatalogDialog_catalog"}},{kind:"FragmentSpread",name:{kind:"Name",value:"catalogUrl_catalog"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"CatalogContentMenu_catalog"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Catalog"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"userUrl_user"}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"CatalogContentNonCreatorMenu_catalog"}},{kind:"FragmentSpread",name:{kind:"Name",value:"CatalogContentCreatorMenu_catalog"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"SaveCatalogButton_catalog"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Catalog"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"username"}}]}},{kind:"Field",name:{kind:"Name",value:"viewerEdge"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"isFollowing"}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"getCatalogSlugId_Catalog"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"CatalogsListItem_catalog"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Catalog"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"predefined"}},{kind:"Field",name:{kind:"Name",value:"visibility"}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"imageId"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"FragmentSpread",name:{kind:"Name",value:"userUrl_user"}},{kind:"FragmentSpread",name:{kind:"Name",value:"isUserVerifiedBookAuthor_user"}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"getCatalogSlugId_Catalog"}},{kind:"FragmentSpread",name:{kind:"Name",value:"formatItemsCount_catalog"}},{kind:"FragmentSpread",name:{kind:"Name",value:"CatalogsListItemCovers_catalog"}},{kind:"FragmentSpread",name:{kind:"Name",value:"CatalogContentMenu_catalog"}},{kind:"FragmentSpread",name:{kind:"Name",value:"SaveCatalogButton_catalog"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"YourCatalogs_catalog"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Catalog"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"CatalogsListItem_catalog"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"GetCatalogsByUserReadingList_catalog"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Catalog"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"CatalogAddToList_catalog"},directives:[{kind:"Directive",name:{kind:"Name",value:"skip"},arguments:[{kind:"Argument",name:{kind:"Name",value:"if"},value:{kind:"Variable",name:{kind:"Name",value:"withCatalogDetails"}}}]}]},{kind:"FragmentSpread",name:{kind:"Name",value:"YourCatalogs_catalog"},directives:[{kind:"Directive",name:{kind:"Name",value:"include"},arguments:[{kind:"Argument",name:{kind:"Name",value:"if"},value:{kind:"Variable",name:{kind:"Name",value:"withCatalogDetails"}}}]}]}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"GetCatalogsByUserCatalogs_catalog"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Catalog"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"CatalogAddToList_catalog"},directives:[{kind:"Directive",name:{kind:"Name",value:"skip"},arguments:[{kind:"Argument",name:{kind:"Name",value:"if"},value:{kind:"Variable",name:{kind:"Name",value:"withCatalogDetails"}}}]}]},{kind:"FragmentSpread",name:{kind:"Name",value:"YourCatalogs_catalog"},directives:[{kind:"Directive",name:{kind:"Name",value:"include"},arguments:[{kind:"Argument",name:{kind:"Name",value:"if"},value:{kind:"Variable",name:{kind:"Name",value:"withCatalogDetails"}}}]}]}]}}]}},86595:(e,n,a)=>{a.d(n,{a:()=>I});var i=a(5544),t=a(96540),d=a(41370),l=a(85764),o=a(97213),m=a(58056),k=a(64314),r=a(52290),s=a(46844),u=a(86527),c=a(53424),v=a(39410),g=a(36557),p=a(42976),N=a(91830),S=a(39160),C=a(46879),F="creatListModal";function I(e){var n=e.isVisible,a=e.hide,I=e.target,y=e.kind,f=e.viewer,_=t.useState(""),T=(0,i.A)(_,2),b=T[0],D=T[1],h=t.useState(!1),E=(0,i.A)(h,2),A=E[0],O=E[1],V=t.useState(""),L=(0,i.A)(V,2),w=L[0],B=L[1],P=t.useState(!1),U=(0,i.A)(P,2),M=U[0],j=U[1],R=(0,S.d4)((function(e){return e.config.authDomain})),x=(0,o.u4)(f.id),G=x.createCatalog,K=x.loading,W=x.data,$=x.error,q=(0,m.Ku)(),H=(0,N.zF)();t.useEffect((function(){if("Catalog"===(null==W?void 0:W.createCatalog.__typename))if(y&&I){var e=W.createCatalog,n=e.id,a=e.version;q({userId:f.id,catalogId:n,version:a,kind:y,itemId:I.id}),Z()}else window.location.assign((0,C.n1u)(W.createCatalog,R))}),[null==W?void 0:W.createCatalog,y,null==I?void 0:I.id,q,f.id]),t.useEffect((function(){$&&H({toastStyle:"RETRYABLE_ERROR",duration:4e3})}),[$,H]);var Y=t.useCallback((function(e){D(e.target.value)}),[D]),X=t.useCallback((function(e){B(e.target.value)}),[B]),Z=t.useCallback((function(){D(""),B(""),O(!1),j(!1),a()}),[a]),z=t.useCallback((function(){var e=b.trim();e.length>0&&G({attributes:{title:e,description:w.trim(),type:p.Mh.LISTS,visibility:M?p.y_.PRIVATE:p.y_.PUBLIC}})}),[b,w,M,G]);return t.createElement(k.m,{isVisible:n,hide:Z,confirmText:t.createElement(d.G,{loading:K,text:"Create"}),isDestructiveAction:!1,onConfirm:z,disableConfirm:!b.trim()||K||(0,l.dX)(b)||(0,l.JX)(w),hideOnConfirm:!1,testId:F},t.createElement(r.a,{height:"400px"},t.createElement(r.a,{paddingBottom:"60px"},t.createElement(v.hE,{scale:"L",testId:"".concat(F,"Title")},"Create new list")),t.createElement(r.a,{textAlign:"left",width:"400px",sm:{width:"100%"}},t.createElement(r.a,{paddingBottom:"20px"},t.createElement(s.A,{value:b,onChange:Y,placeholder:"Give it a name",characterCountLimit:l.OW,testId:"".concat(F,"Input")})),t.createElement(r.a,{paddingBottom:"20px"},A?t.createElement(r.a,{maxHeight:"170px",overflow:"auto"},t.createElement(s.A,{value:w,onChange:X,placeholder:"Description",isMultiline:!0,autoFocus:!0,characterCountLimit:l.Ke})):t.createElement(u.N,{onClick:function(){return O(!0)},"data-testid":"".concat(F,"AddDescriptionButton")},t.createElement(g.kZ,{scale:"L",color:"ACCENT"},"Add a description"))),t.createElement(r.a,null,t.createElement(c.S,{checked:M,onChange:function(){return j(!M)},textScale:"L",testId:"".concat(F,"MakePrivateCheckbox")},"Make it private")))))}},58056:(e,n,a)=>{a.d(n,{ue:()=>N,Xj:()=>S,EH:()=>F,Ku:()=>C,pj:()=>f,$O:()=>I});var i=a(64467),t=a(5544),d=a(88055),l=a.n(d),o=a(95420),m=a(96540),k=a(678),r=a(34317),s=a(42976),u=a(97249),c={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"editCatalogItemsMutation_postViewerEdge"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PostViewerEdge"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"catalogsConnection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"catalogsContainingThis"},arguments:[{kind:"Argument",name:{kind:"Name",value:"type"},value:{kind:"EnumValue",value:"LISTS"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"catalogId"}},{kind:"Field",name:{kind:"Name",value:"version"}},{kind:"Field",name:{kind:"Name",value:"catalogItemIds"}}]}},{kind:"Field",name:{kind:"Name",value:"predefinedContainingThis"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"catalogId"}},{kind:"Field",name:{kind:"Name",value:"predefined"}},{kind:"Field",name:{kind:"Name",value:"version"}},{kind:"Field",name:{kind:"Name",value:"catalogItemIds"}}]}}]}}]}}]},v={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"EditCatalogItems"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"catalogId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"version"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"operations"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"CatalogItemMutateOperationInput"}}}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"editCatalogItems"},arguments:[{kind:"Argument",name:{kind:"Name",value:"catalogId"},value:{kind:"Variable",name:{kind:"Name",value:"catalogId"}}},{kind:"Argument",name:{kind:"Name",value:"version"},value:{kind:"Variable",name:{kind:"Name",value:"version"}}},{kind:"Argument",name:{kind:"Name",value:"operations"},value:{kind:"Variable",name:{kind:"Name",value:"operations"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"EditCatalogItemsSuccess"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"version"}},{kind:"Field",name:{kind:"Name",value:"operations"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"preprend"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"catalogItemId"}}]}},{kind:"Field",name:{kind:"Name",value:"append"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"catalogItemId"}}]}},{kind:"Field",name:{kind:"Name",value:"move"}}]}}]}}]}}]}}]};function g(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),a.push.apply(a,i)}return a}function p(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?g(Object(a),!0).forEach((function(n){(0,i.A)(e,n,a[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):g(Object(a)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))}))}return e}var N="temp-cat-item-id",S="temp-cat-version";function C(){var e=(0,r.$L)(),n=(0,m.useRef)(null),a=(0,m.useRef)((function(a){var i=n.current;i&&"EditCatalogItemsSuccess"===a.editCatalogItems.__typename&&i.kind===s.Bd.POST&&e.event("post.addToList",{listId:i.catalogId,postId:i.itemId})})).current,i=(0,o.n)(v,{onCompleted:a}),d=(0,t.A)(i,1)[0];return(0,m.useCallback)((function(e){n.current=e,d({variables:{catalogId:e.catalogId,version:e.version,operations:[{preprend:{type:e.kind,id:e.itemId}}]},update:function(n,a){y({viewerId:e.userId,cache:n,result:a,catalogId:e.catalogId,itemId:e.itemId,kind:e.kind,operation:"preprend",predefined:e.predefined}),(0,k.gt)(n,e.userId,s.Mh.LISTS,e.catalogId)}})}),[d])}function F(e,n,a,i,t,d){var l=(0,r.$L)();return(0,o.n)(v,{variables:{catalogId:n,version:a,operations:[{preprend:{type:t,id:i}}]},update:function(a,l){y({viewerId:e,cache:a,result:l,catalogId:n,itemId:i,kind:t,operation:"preprend",predefined:d}),d||(0,k.gt)(a,e,s.Mh.LISTS,n),(0,k.VP)(a,n,[i],t)},optimisticResponse:{editCatalogItems:{__typename:"EditCatalogItemsSuccess",operations:[{__typename:"EditCatalogItemMutationOperationResponse",preprend:{__typename:"CatalogItemV2",catalogItemId:N},append:null,move:null}],version:S}},onCompleted:function(e){"EditCatalogItemsSuccess"===e.editCatalogItems.__typename&&t===s.Bd.POST&&l.event("post.addToList",{listId:n,postId:i})}})}var I=function(e,n,a,i,t,d){var l=(0,r.$L)(),m=i.map((function(e){return e.catalogItemIds})).flat();return(0,o.n)(v,{variables:{catalogId:n,version:a,operations:m.map((function(e){return{delete:{itemId:e}}}))},update:function(a,d){i.forEach((function(i){y({viewerId:e,cache:a,result:d,catalogId:n,itemId:i.entityId,kind:i.entityType,operation:"delete",predefined:t,deletedCatalogItemIds:i.catalogItemIds})})),(0,k.WM)(a,n,m,s.Bd.POST),t||(0,k.gt)(a,e,s.Mh.LISTS,n)},optimisticResponse:{editCatalogItems:{__typename:"EditCatalogItemsSuccess",operations:i.map((function(e){return{__typename:"EditCatalogItemMutationOperationResponse",append:null,preprend:null,move:null}})),version:S}},onCompleted:function(e){if("EditCatalogItemsSuccess"===(null==e?void 0:e.editCatalogItems.__typename)){d&&d();var a=i.length;a>1?l.event("list.itemsDeleted",{listId:n,itemsCount:a}):i[0].entityType===s.Bd.POST&&l.event("post.removeFromList",{listId:n,postId:i[0].entityId})}}})};function y(e){var n,a,t,d=e.cache,o=e.result,m=e.catalogId,r=e.viewerId,v=e.itemId,g=e.kind,N=e.operation,S=e.predefined,C=e.deletedCatalogItemIds,F=null===(n=o.data)||void 0===n?void 0:n.editCatalogItems;if("EditCatalogItemsSuccess"===(null==F?void 0:F.__typename)&&((0,k.eq)(d,m,F.version),g===s.Bd.POST)){a=(0,u.N)(v,r),t=c;var I="".concat("PostViewerEdge",":").concat(a),y=d.readFragment({id:I,fragment:t});if(null!=y&&y.catalogsConnection){var f=F.operations,_=F.version,T=f[0];if(!T||"move"===N)return;var b=l()(S?y.catalogsConnection.predefinedContainingThis:y.catalogsConnection.catalogsContainingThis),D=b.findIndex((function(e){return S?e.predefined===S:e.catalogId===m}));if("append"===N||"preprend"===N){var h=T[N];if(-1!==D)b[D].catalogItemIds.push(h.catalogItemId);else{var E={catalogId:m,version:_,catalogItemIds:[h.catalogItemId]};S&&(E.predefined=S),b.push(E)}}else if("delete"===N&&-1!==D&&C){var A=b[D].catalogItemIds;b[D].catalogItemIds=A.filter((function(e){return!C.includes(e)})),0===b[D].catalogItemIds.length&&b.splice(D,1)}d.writeFragment({id:I,fragment:t,data:p(p({},y),{},{catalogsConnection:p(p({},null==y?void 0:y.catalogsConnection),{},(0,i.A)({},S?"predefinedContainingThis":"catalogsContainingThis",b))})})}}}function f(e,n,a,i){return(0,o.n)(v,{variables:{catalogId:e,version:n,operations:a},update:function(n){(0,k.Tq)(n,e)},onCompleted:i})}},8697:(e,n,a)=>{a.d(n,{W:()=>r});var i=a(96540),t=a(9942),d=a(44572),l=a(49287),o=a(39160),m=a(79959),k=a(46879),r=function(e){var n=e.opt_isDraft,a=e.opt_params,r=e.operation,s=e.opt_hash,u=e.opt_location,c=(0,o.d4)((function(e){return e.config.authDomain})),v=(0,o.d4)((function(e){return e.navigation.currentLocation})),g=(0,l.jI)(),p=(0,l.Zj)(),N=(0,m.ST)((0,k.cR0)(c),{operation:r||"login",redirect:(0,d.$q)(u||v,g,p,null,null,a,s),isDraft:n?"1":"0"});return i.createElement(t.r,{to:N,temporary:!0})}},97249:(e,n,a)=>{function i(e,n){return"postId:".concat(e,"-viewerId:").concat(n)}a.d(n,{N:()=>i})}}]);
//# sourceMappingURL=https://stats.medium.build/lite/sourcemaps/9214.a792bbcc.chunk.js.map