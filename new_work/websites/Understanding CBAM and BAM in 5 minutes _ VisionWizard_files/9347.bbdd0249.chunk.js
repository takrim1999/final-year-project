"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[9347],{49470:(e,n,i)=>{i.d(n,{A:()=>o});var t,a=i(96540);function l(){return l=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var t in i)({}).hasOwnProperty.call(i,t)&&(e[t]=i[t])}return e},l.apply(null,arguments)}const o=function(e){return a.createElement("svg",l({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24"},e),t||(t=a.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21a9 9 0 1 0 0-18 9 9 0 0 0 0 18M8.25 12h7.5"})))}},94971:(e,n,i)=>{i.d(n,{C:()=>d});var t=i(96540),a=i(52290),l=i(86527),o=i(46879);function d(e){var n=e.entityName,i=void 0===n?"story":n;return t.createElement(a.a,{textAlign:"center",testId:"deleteStoryModalText"},"Deletion is not reversible, and the story will be completely deleted. If you do not want to delete, you can"," ",t.createElement(l.N,{target:"_blank",href:o.Xj4,inline:!0,linkStyle:"OBVIOUS"},"unlist the ",i),".")}},43849:(e,n,i)=>{i.d(n,{$:()=>k,J:()=>c});var t=i(5544),a=i(96540),l=i(44402),o=i(42976),d=i(60603),r=i(8963),s=i(34507),m=function(e){return{overflow:"hidden",transition:"opacity 300ms ease".concat(e?"":" 300ms",", max-height 300ms ease").concat(e?" 300ms":""),maxHeight:e?"0":"450px",opacity:e?0:1}},u=(0,a.createContext)({});function c(e){var n=e.children,i=e.post,c=(0,l.l)(),k=(0,a.useRef)(!1),v=(0,s.K)(i.id,"cache-only").explicitSignal,p=(0,a.useState)(v===o.WN.SHOW_LESS),N=(0,t.A)(p,2),S=N[0],g=N[1],f=(0,d.e)(!1),y=(0,t.A)(f,3),h=y[0],b=y[1],F=y[2],E=(0,a.useCallback)((function(e){S&&k.current&&"max-height"===e.propertyName&&(b(),k.current=!1)}),[S]),C=(0,a.useCallback)((function(){k.current=!0,g(!0)}),[]),w=(0,a.useCallback)((function(){g(!1)}),[]),P=(0,a.useMemo)((function(){return{animateShowLess:C,animateUndo:w}}),[C,w]);return a.createElement(u.Provider,{value:P},a.createElement("div",{className:c(m(S)),onTransitionEnd:E},n),a.createElement(r.b,{post:i,isVisible:h,hide:F}))}var k=function(){return(0,a.useContext)(u)}},8963:(e,n,i)=>{i.d(n,{b:()=>E});var t,a=i(5544),l=i(96540),o=i(17045),d=i(53843),r=i(2550),s=i(21335),m=i(71984),u=i(52290),c=i(94170),k=i(49287),v=i(42976),p=i(60603),N=i(55981),S=i(36557),g=i(44402);function f(){return f=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var t in i)({}).hasOwnProperty.call(i,t)&&(e[t]=i[t])}return e},f.apply(null,arguments)}const y=function(e){return l.createElement("svg",f({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24"},e),t||(t=l.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M4.292 9.5v5H2v-5zm1-.124v5.248l.105.08L13 20.484V3.516l-7.603 5.78zm7.905-7.266L4.792 8.5H1.5A.5.5 0 0 0 1 9v6a.5.5 0 0 0 .5.5h3.292l8.405 6.39a.5.5 0 0 0 .803-.398V2.508a.5.5 0 0 0-.803-.398m5.657 7.035a.5.5 0 0 0-.708.707L20.293 12l-2.147 2.148a.5.5 0 1 0 .708.707L21 12.707l2.146 2.148a.5.5 0 1 0 .708-.707L21.707 12l2.147-2.148a.5.5 0 1 0-.708-.707L21 11.293z",clipRule:"evenodd"})))};var h=function(e){return function(n){return{padding:"16px 24px",border:"none",cursor:"pointer",display:"flex","&:first-of-type":{paddingTop:"20px"},"&:last-of-type":{paddingBottom:"20px"},"&:not(:last-of-type)":{borderBottom:"1px solid ".concat(n.colorTokens.border.neutral.primary.base)},"& svg path":{fill:e?n.colorTokens.foreground.error.primary.base:n.colorTokens.foreground.neutral.secondary.base},":hover svg path":{fill:e?n.colorTokens.foreground.error.primary.hover:n.colorTokens.foreground.neutral.primary.base}}}};function b(e){var n=e.onClick,i=e.isReport,t=e.text,a=e.detail,o=(0,g.l)();return l.createElement("button",{className:o(h(i)),onClick:n},i?l.createElement(N.n,null):l.createElement(y,null),l.createElement(u.a,{marginLeft:"24px",display:"flex",flexDirection:"column",gap:"4px",textAlign:"left"},l.createElement(S.kZ,{scale:"M",color:i?"ERROR":"DARKER",clamp:1},t),a&&l.createElement(S.kZ,{scale:"S",clamp:1},a)))}var F=i(34507);function E(e){var n,i,t=e.hide,d=e.isVisible,u=e.post,c=null!==(n=null===(i=u.creator)||void 0===i?void 0:i.id)&&void 0!==n?n:"",v=(0,s.cd)(c).viewerEdge,N=(0,r.A)().viewerId,S=(0,p.e)(!1),g=(0,a.A)(S,3),f=g[0],y=g[1],h=g[2],b=(0,o.M)({viewerId:N,targetAuthorId:c,targetPostId:u.id,onOptimisticComplete:h}),F=(0,l.useCallback)((function(){y(),t()}),[t]);return l.createElement(l.Fragment,null,d&&l.createElement(k.Ne,{source:{dimension:"negative_signal_modal"},extendSource:!0},l.createElement(C,{post:u,report:F,hide:t})),l.createElement(m.e,{isVisible:f,hide:h,type:"story",alreadyBlocking:!(null==v||!v.isBlocking),onSubmit:b}))}function C(e){var n=e.post,i=e.report,t=e.hide,o=(0,l.useState)(!1),d=(0,a.A)(o,2),r=d[0],s=d[1],m=(0,F.K)(n.id),k=m.undo,p=m.showUndoToast,N=(0,l.useCallback)((function(){r&&(p(v.WN.SHOW_LESS),s(!1)),t()}),[r,t]),S=(0,l.useCallback)((function(){k(),s(!0)}),[k]);return l.createElement(c.a,{hide:N,title:"Got it, we'll recommend fewer like this",subtitleTextAlign:"center",subtitle:"You can additionally take any of the actions below.",padding:"40px 32px 32px",subtitleMargin:"16px",confirmButtonStyle:"BRAND",confirmText:"Done",cancelText:"Undo",cancelButtonStyle:"SUBTLE",onCancel:S},l.createElement(u.a,{display:"flex",justifyContent:"center",marginBottom:"32px"},l.createElement(u.a,{width:"100%",maxWidth:"320px",display:"flex",flexDirection:"column",borderRadius:"8px",border:"neutral.primary"},n.creator&&!n.creator.viewerEdge.isMuting&&l.createElement(w,{publisher:n.creator,hide:t}),n.collection&&!n.collection.viewerEdge.isMuting&&l.createElement(w,{publisher:n.collection,hide:t}),l.createElement(b,{onClick:i,isReport:!0,text:"Report story..."}))))}function w(e){var n=e.publisher,i=e.hide,t="User"===n.__typename,a=(0,d.d)({authorId:t?n.id:void 0,collectionId:t?void 0:n.id}),o=a.muteAuthor,r=a.mutePub,s=(0,l.useCallback)((function(){t?o():r(),i()}),[o,r,t]);return l.createElement(b,{onClick:s,text:"Mute ".concat(t?"author":"publication"),detail:n.name})}},34507:(e,n,i)=>{i.d(n,{K:()=>f});var t=i(64467),a=i(5544),l=i(95420),o=i(95964),d=i(96540),r=i(2550),s=i(34317),m=i(49287),u=i(42976),c=i(91830),k=i(97249),v=i(43849),p={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ExplicitSignalPostQuery"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"post"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"NegativeSignalModal_post"}},{kind:"Field",name:{kind:"Name",value:"viewerEdge"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"explicitSignalState"}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"NegativeSignalModal_publisher"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Publisher"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"NegativeSignalModal_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"NegativeSignalModal_publisher"}},{kind:"Field",name:{kind:"Name",value:"viewerEdge"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"isMuting"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"NegativeSignalModal_publisher"}},{kind:"Field",name:{kind:"Name",value:"viewerEdge"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"isMuting"}}]}}]}}]}}]},N={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"ExplicitSignalMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"postId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"signal"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ExplicitUserSignal"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sendExplicitSignal"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"postId"},value:{kind:"Variable",name:{kind:"Name",value:"postId"}}},{kind:"ObjectField",name:{kind:"Name",value:"signal"},value:{kind:"Variable",name:{kind:"Name",value:"signal"}}}]}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}}]}}]}}]};function S(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}function g(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?S(Object(i),!0).forEach((function(n){(0,t.A)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):S(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}function f(e,n){var i,t,S=(0,s.$L)(),f=(0,m.Fo)()||{},y=(0,r.A)().viewerId,h=(0,c.zF)(),b=(0,v.$)().animateUndo,F=(0,l.n)(N),E=(0,a.A)(F,1)[0],C=(0,o.IT)(p,{variables:{id:e},fetchPolicy:n}),w=C.data,P=C.loading,A=null==w||null===(i=w.post)||void 0===i||null===(t=i.viewerEdge)||void 0===t?void 0:t.explicitSignalState,_=(0,d.useCallback)((function(n){E({variables:{postId:e,signal:n},update:function(i){y&&i.modify({id:"PostViewerEdge:".concat((0,k.N)(e,y)),fields:{explicitSignalState:function(){return n===u.WN.CLEAR_SIGNAL?null:n}}})}})}),[E,e,y]),I=(0,d.useCallback)((function(n){var i=n.name,t=n.data,a=n.dimension;return S.event(i,g({postId:e,source:a?(0,m.wv)(g(g({},f),{},{dimension:a})):(0,m.wv)(f)},t))}),[e,f]),T=(0,d.useCallback)((function(e){var n=A===u.WN.SHOW_MORE;_(u.WN.CLEAR_SIGNAL),I({name:"post.see_".concat(n?"more":"less",".undo"),dimension:e}),n?O(u.WN.SHOW_MORE):null==b||b()}),[e,A,b]),D=(0,d.useCallback)((function(){_(u.WN.SHOW_LESS),I({name:"post.see_less",data:{mutationSent:!0}})}),[I,_]),O=(0,d.useCallback)((function(e){h({message:"Undone. We won’t recommend ".concat(e===u.WN.SHOW_LESS?"fewer":"more"," stories like this."),extraParams:{hideCloseButton:!0}})}),[]);return{loading:P,undo:T,showLess:D,explicitSignal:A,showUndoToast:O}}},89347:(e,n,i)=>{i.d(n,{G:()=>Re});var t=i(58168),a=i(80045),l=i(96540),o=i(5544),d=i(64467),r=i(14792),s=i.n(r),m=i(95964),u=i(94971),c=i(45522),k=i(14782),v=i(86527),p=i(52290),N=i(85050);function S(e){var n=e.onClick,i=e.hidePopover,t=e.showAt,a=e.bookmarkIcon,o=(0,l.useCallback)((function(){i(),n()}),[n,i]);return l.createElement(N.V,{xs:t.xs,sm:t.sm,md:t.md,lg:t.lg,xl:t.xl},l.createElement(k.q3,null,l.createElement(v.N,{"aria-controls":"aria-id","aria-expanded":"false",onClick:o},l.createElement(p.a,{display:"flex",flexDirection:"row",alignItems:"center",ariaHidden:"true",gap:"12px"},a,"Save"))),l.createElement(k.eS,null))}var g=i(69415),f=i(36557),y=i(61333),h={width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center"};function b(e){var n=e.hidePopover,i=(0,g.y)(),t=i.areHighlightsHidden,a=i.toggleHideHighlights,d=(0,l.useState)(),r=(0,o.A)(d,2),s=r[0],m=r[1],u=(0,l.useCallback)((function(){a(),n()}),[n,a]);return(0,l.useEffect)((function(){m(navigator.userAgent)}),[]),l.createElement(k.q3,{paddingTopBottom:"6px"},l.createElement(v.N,{onClick:u,rules:h},l.createElement("span",null,t?"Show":"Hide"," highlights"),!(0,y.Gz)(s)&&l.createElement(p.a,{padding:"2px 6px",borderRadius:"4px",border:"neutral.tertiary"},l.createElement(f.kZ,{scale:"XS"},(0,y.cX)(s)?"⌘":"Ctrl"," /"))))}var F=i(70521),E=i(17745),C=i(27721),w=i(1722),P=i(56743),A=i(75599),_=i(39160),I=i(51771),T=function(e){var n=e.post,i=e.hidePopover,t=e.showHideHighlights,a=(0,C.R)().value,o=null==a?void 0:a.id,d=(0,w.h)(n).viewerEdge,r=(0,A.w)(),s=(0,_.Dy)((function(e){return e.multiVote.clapsPerPost})),m=(0,I.F)(s,n,d),u=m.clapCount,c=m.viewerClapCount,p=(0,E.f)(),N=o&&u&&c&&c>0;return N||t?l.createElement(l.Fragment,null,!!N&&l.createElement(k.q3,null,l.createElement(v.N,{onClick:function(){p(n,(null==a?void 0:a.id)||"",-c,d),r((0,P.dy)({postId:n.id})),i()}},"Undo claps")),l.createElement(k.eS,null)):null},D=i(23496),O=i(44929),x=i(49534),R=i(58285),V=i(9942),M=i(4369),L=i(5249),B=i(71468),U=i(91830),H={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"PostAllowResponsesMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"targetPostId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"allowResponses"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"setPostAllowResponses"},arguments:[{kind:"Argument",name:{kind:"Name",value:"targetPostId"},value:{kind:"Variable",name:{kind:"Name",value:"targetPostId"}}},{kind:"Argument",name:{kind:"Name",value:"allowResponses"},value:{kind:"Variable",name:{kind:"Name",value:"allowResponses"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"allowResponses"}}]}}]}}]},j=(0,B.Ng)()((function(e){var n=e.children,i=e.dispatch,t=e.onCompleted,a=e.targetPostId;return l.createElement(L.s,{mutation:H,onCompleted:function(){i((0,U.MZ)({message:"Responses are now hidden for this post."})),t&&t()},variables:{targetPostId:a,allowResponses:!1},optimisticResponse:{__typename:"Mutation",setPostAllowResponses:{__typename:"Post",id:a,allowResponses:!1}}},(function(e){return l.createElement(l.Fragment,null,n({mutate:e}))}))})),W=(0,B.Ng)()((function(e){var n=e.children,i=e.dispatch,t=e.onCompleted,a=e.targetPostId;return l.createElement(L.s,{mutation:H,onCompleted:function(){i((0,U.MZ)({message:"Responses are now shown for this post."})),t&&t()},variables:{targetPostId:a,allowResponses:!0},optimisticResponse:{__typename:"Mutation",setPostAllowResponses:{__typename:"Post",id:a,allowResponses:!0}}},(function(e){return l.createElement(l.Fragment,null,n({mutate:e}))}))})),q=i(22036),z=i(60603),G=function(e){var n=e.hidePopover,i=e.postId,t=e.allowResponses,a=(0,z.e)(!1),d=(0,o.A)(a,3),r=d[0],s=d[1],m=d[2],u=function(){m(),n()};return l.createElement(l.Fragment,null,l.createElement(j,{targetPostId:i},(function(e){var n=e.mutate;return l.createElement(q.n,{onConfirm:n,isVisible:r,hide:u,entityTypename:"Post"})})),l.createElement(W,{targetPostId:i},(function(e){var n=e.mutate;return l.createElement(k.q3,null,l.createElement(v.N,{onClick:function(){t?s():n()}},t?"Hide responses":"Show responses"))})))},K=i(15795),Z=i(19723),$=i(66305),J=i(51260),X=i(79959);function Q(e){var n=e.post,i=!!(0,Z._P)("enable_lite_post_publishing_screen"),t=(0,C.R)().value,a=(0,l.useState)(!1),d=(0,o.A)(a,2),r=d[0],s=d[1],m=(0,K.G)(),u=(0,J.Nw)("ShowPostSubmission",{postId:n.id}),c=(0,X.ST)(u,{redirectUrl:window.location.href}),p=(0,X.ST)(u,{redirectUrl:window.location.href,submitType:"publication-submission"}),N=n.statusForCollection,S=n.isPublished,g=n.creator,f=!!t&&t.id===(null==g?void 0:g.id);return r||$.R5.on("load",(function(){return s(!0)})),"PENDING"!==N&&"APPROVED"!==N&&S&&r&&f&&!n.inResponseToEntityType?l.createElement(k.q3,null,l.createElement(v.N,{onClick:function(){return m("submission.started",{postId:n.id})},href:i?p:c},"Submit to publication")):null}var Y=i(38714),ee=i(89142),ne=i(32038),ie=i(86329),te=i(43634),ae=i(59348),le=i(88308),oe=i(21335),de=i(71984),re=i(17045),se=function(e){var n=e.hidePopover,i=e.targetUserId,t=e.postId,a=e.viewerId,d=(0,oe.cd)(i).viewerEdge,r=!(null==d||!d.isBlocking),s=(0,z.e)(!1),m=(0,o.A)(s,3),u=m[0],c=m[1],p=m[2],N=(0,l.useCallback)((function(){p(),n()}),[n,p]),S=(0,re.M)({viewerId:a,targetAuthorId:i,targetPostId:t,onOptimisticComplete:N});return l.createElement(l.Fragment,null,l.createElement(de.e,{onSubmit:S,isVisible:u,hide:N,type:"story",alreadyBlocking:r}),l.createElement(k.q3,null,l.createElement(v.N,{onClick:c,color:"RED"},"Report story...")))},me=i(46445),ue=i(24960),ce=i(42976),ke=function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return function(){for(var e=0,i=n;e<i.length;e++)(0,i[e])()}},ve=i(46879),pe={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"CreatorActionOverflowPopoverQuery"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"postId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"post"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"postId"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"CreatorActionOverflowPopover_post"}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"MutePopoverOptions_creator"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"auroraHooks_publisher"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Publisher"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Collection"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isAuroraEligible"}},{kind:"Field",name:{kind:"Name",value:"isAuroraVisible"}},{kind:"Field",name:{kind:"Name",value:"viewerEdge"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"isEditor"}}]}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isAuroraVisible"}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"MutePopoverOptions_collection"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Collection"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"useIsPinnedInContext_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"pendingCollection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"pinnedAt"}},{kind:"Field",name:{kind:"Name",value:"pinnedByCreatorAt"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"NewsletterV3EmailToSubscribersMenuItem_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"newsletterV3"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"subscribersCount"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"isNewsletter"}},{kind:"Field",name:{kind:"Name",value:"isAuthorNewsletter"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"MultiVoteCount_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"ClapMutation_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"clapCount"}},{kind:"FragmentSpread",name:{kind:"Name",value:"MultiVoteCount_post"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"OverflowMenuItemUndoClaps_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"clapCount"}},{kind:"FragmentSpread",name:{kind:"Name",value:"ClapMutation_post"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"SusiModal_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"SusiClickable_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"mediumUrl"}},{kind:"FragmentSpread",name:{kind:"Name",value:"SusiModal_post"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"AddToCatalogBase_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"isPublished"}},{kind:"FragmentSpread",name:{kind:"Name",value:"SusiClickable_post"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"useFeatureStoryInPub_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"slug"}},{kind:"Field",name:{kind:"Name",value:"name"}}]}},{kind:"Field",name:{kind:"Name",value:"publicationsFeaturingPost"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"isUserVerifiedBookAuthor_user"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"verifications"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isBookAuthor"}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"collectionUrl_collection"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Collection"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"domain"}},{kind:"Field",name:{kind:"Name",value:"slug"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"CollectionAvatar_collection"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Collection"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"avatar"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"collectionUrl_collection"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"PostPreview_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"title"}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"username"}},{kind:"FragmentSpread",name:{kind:"Name",value:"isUserVerifiedBookAuthor_user"}}]}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"slug"}},{kind:"FragmentSpread",name:{kind:"Name",value:"CollectionAvatar_collection"}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"FeatureStoryModal_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"slug"}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"useFeatureStoryInPub_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"PostPreview_post"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"FeatureStoryMenuItem_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"useFeatureStoryInPub_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"FeatureStoryModal_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"PostPreview_post"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"WithdrawOrRemoveActionsFragment_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}}]}},{kind:"Field",name:{kind:"Name",value:"pendingCollection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"WithdrawOrRemoveSubmissionFragment_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"WithdrawOrRemoveActionsFragment_post"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"CollectionSubmissionPopoverMenuItem_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"statusForCollection"}},{kind:"Field",name:{kind:"Name",value:"isPublished"}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"inResponseToEntityType"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"CreatorActionOverflowPopover_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"allowResponses"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"statusForCollection"}},{kind:"Field",name:{kind:"Name",value:"isLocked"}},{kind:"Field",name:{kind:"Name",value:"isPublished"}},{kind:"Field",name:{kind:"Name",value:"clapCount"}},{kind:"Field",name:{kind:"Name",value:"pinnedAt"}},{kind:"Field",name:{kind:"Name",value:"pinnedByCreatorAt"}},{kind:"Field",name:{kind:"Name",value:"curationEligibleAt"}},{kind:"Field",name:{kind:"Name",value:"responseDistribution"}},{kind:"Field",name:{kind:"Name",value:"inResponseToPostResult"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"inResponseToCatalogResult"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"pendingCollection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"avatar"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"domain"}},{kind:"Field",name:{kind:"Name",value:"slug"}}]}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"MutePopoverOptions_creator"}},{kind:"FragmentSpread",name:{kind:"Name",value:"auroraHooks_publisher"}}]}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"avatar"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"domain"}},{kind:"Field",name:{kind:"Name",value:"slug"}},{kind:"FragmentSpread",name:{kind:"Name",value:"MutePopoverOptions_collection"}},{kind:"FragmentSpread",name:{kind:"Name",value:"auroraHooks_publisher"}}]}},{kind:"Field",name:{kind:"Name",value:"publicationsFeaturingPost"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"useIsPinnedInContext_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"NewsletterV3EmailToSubscribersMenuItem_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"OverflowMenuItemUndoClaps_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"AddToCatalogBase_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"FeatureStoryMenuItem_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"WithdrawOrRemoveSubmissionFragment_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"CollectionSubmissionPopoverMenuItem_post"}}]}}]},Ne=i(8457);function Se(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}function ge(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?Se(Object(i),!0).forEach((function(n){(0,d.A)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Se(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}var fe,ye=function(e){var n=(0,m.IT)(pe,{variables:{postId:e.post.id}}).data;if(null==n||!n.post)return null;var i=ge(ge({},e),{},{post:n.post});return l.createElement(he,i)},he=function(e){var n,i,a,d=e.post,r=e.hideUndoApplause,m=void 0!==r&&r,N=e.isResponsive,g=e.popoverPositioningStrategy,f=e.hideOnScroll,y=e.testId,h=e.prependMenuItems,E=e.rules,w=e.showAddToList,P=e.showHideHighlights,A=e.onButtonClick,I=d.creator,L=d.collection,B=d.allowResponses,H=(0,ie.J)(null==L?void 0:L.id).viewerEdge,j=(0,U.zF)(),W=(0,C.R)().value,q=null==W?void 0:W.id,K=d.responseDistribution===ce.IZ.DISTRIBUTED,$=!!d.inResponseToPostResult||!!d.inResponseToCatalogResult,X=$?"response":"story",oe=(0,ee.L)(d),de=(0,o.A)(oe,2),re=de[0],pe=de[1],Se=(0,Y.M)(d.collection),ge=(0,Y.M)(d.creator),fe=(0,l.useCallback)((function(e){var n,i,t;j({extraParams:{collectionName:(null===(n=d.collection)||void 0===n?void 0:n.name)||"",becamePinned:!(null===(i=e.data)||void 0===i||null===(t=i.setPinnedAt)||void 0===t||!t.pinnedAt)},toastStyle:"POST_PINNED_TO_COLLECTION_HOMEPAGE"})}),[null===(n=d.collection)||void 0===n?void 0:n.name]),ye=(0,l.useCallback)((function(e,n){var i;"MutationSuccess"===(null===(i=e.data)||void 0===i?void 0:i.setPostPinnedOnCreatorProfile.__typename)&&j({message:"This ".concat(X,n?" has been unpinned from your profile's homepage":" has been pinned to your profile's homepage")})}),[]),he=(0,l.useCallback)((function(){pe().then(fe)}),[pe,fe,null==d||null===(i=d.collection)||void 0===i?void 0:i.name]),be=(0,ee.m)(d),Fe=(0,o.A)(be,2),Ee=Fe[0],Ce=Fe[1],we=(0,l.useCallback)((function(){Ce().then((function(e){return ye(e,Ee)}))}),[Ce,ye]),Pe=(0,_.d4)((function(e){return e.config.authDomain})),Ae=(0,l.useState)(!1),_e=(0,o.A)(Ae,2),Ie=_e[0],Te=_e[1],De=(0,z.e)(!1),Oe=(0,o.A)(De,3),xe=Oe[0],Re=Oe[1],Ve=Oe[2],Me=(0,z.e)(!1),Le=(0,o.A)(Me,4),Be=Le[0],Ue=Le[2],He=Le[3],je=(0,x.Q)(d.id),We=(0,o.A)(je,1)[0],qe=(0,z.e)(!1),ze=(0,o.A)(qe,3),Ge=ze[0],Ke=ze[1],Ze=ze[2],$e=(0,l.useCallback)((function(){He(),null==A||A()}),[He,A]),Je=(0,J.Nw)("ShowHome",{}),Xe=(0,l.useCallback)((function(){We().then((function(){window.location.href=Je}))}),[We,Je]),Qe="Delete story";K?Qe="Delete story and response":$&&(Qe="Delete response");var Ye=K?ne.e:l.createElement(u.C,{entityName:X}),en=(0,Z._P)("can_edit_members_only_posts");if(!I||!W)return null;var nn=q===I.id,tn=null==H?void 0:H.isEditor,an=nn||tn,ln=en&&d&&d.isLocked,on=an||ln,dn="creatorActionOverflowMenu",rn=tn&&!nn,sn=!$||K,mn=L&&tn&&d.isPublished,un=null==d?void 0:d.publicationsFeaturingPost.map((function(e){return e.id})),cn=null!==(a=L&&un.includes(L.id))&&void 0!==a&&a,kn=function(){return{maxWidth:"280px"}},vn=function(){K&&(Ue(),Re())};if(Ie)return l.createElement(V.r,{to:(0,ve.ycK)(Pe,d.id)});var pn={kind:ce.Bd.POST,target:d};return l.createElement(l.Fragment,null,l.createElement(me.T,{buttonStyle:"STRONG",cancelText:"Cancel",isVisible:xe,onConfirm:function(){Te(!0)},hide:Ve,titleText:"Edit story and response",confirmText:"Continue",isDestructiveAction:!1},ne.T),l.createElement(me.T,{buttonStyle:"ERROR",cancelText:"Cancel",isVisible:Ge,onConfirm:Xe,hide:Ze,titleText:Qe,confirmText:"Delete",isDestructiveAction:!0,testId:"deleteStoryModal"},Ye),l.createElement(D.f,(0,t.A)({},pn,{viewer:W}),(function(e){var n=e.onClick,i=e.bookmarkIcon;return l.createElement(ue.A,{popoverRules:kn,targetDistance:10,ariaId:dn,isVisible:Be,hide:Ue,positioningStrategy:g,hideOnScroll:f,popoverRenderFn:function(){return l.createElement(k.Ni,null,h&&l.createElement(l.Fragment,null,h(Ue)),w&&l.createElement(S,{showAt:w,onClick:n,hidePopover:Ue,bookmarkIcon:i}),l.createElement(l.Fragment,null,l.createElement(O.D,{type:"popover",handleClick:vn,href:(0,ve.ycK)(Pe,d.id),isVisible:!!on},"Edit ",X),mn&&l.createElement(c.k,{post:d,hidePopover:Ue,isFeaturedInCurrentPublication:cn,showCollectionName:!0,showNewLabelOrTokenCount:!0}),L&&tn&&Se&&sn&&l.createElement(k.q3,null,l.createElement(v.N,{onClick:he,rules:{textAlign:"left"}},re?"Unpin this ".concat(X," from "):"Pin this ".concat(X," to "),L.name)),nn&&ge&&sn&&l.createElement(k.q3,null,l.createElement(v.N,{onClick:we},Ee?"Unpin this ".concat(X," from your profile"):"Pin this ".concat(X," to your profile"))),l.createElement(M.z,{post:d,onClick:Ue,menuStyle:"TEXT"}),l.createElement(k.eS,null),l.createElement(k.q3,null,l.createElement(v.N,{href:(0,ve.vEY)(Pe,d.id)},s()(X)," settings")),!$&&l.createElement(k.q3,null,l.createElement(v.N,{href:(0,ve.doj)(Pe,d.id)},"Story stats")),l.createElement(k.eS,null),P&&l.createElement(b,{hidePopover:Ue}),l.createElement(G,{hidePopover:Ue,postId:d.id,allowResponses:B}),l.createElement(Q,{post:d}),l.createElement(Ne.m,{post:d,postActionCallback:Ue}),nn&&l.createElement(k.q3,null,l.createElement(v.N,{onClick:ke(Ue,Ke),color:"RED"},"Delete ",X)),rn?l.createElement(l.Fragment,null,l.createElement(k.eS,null),!m&&l.createElement(T,{post:d,hidePopover:Ue}),l.createElement(l.Fragment,null,q?l.createElement(se,{targetUserId:I.id,postId:d.id,hidePopover:Ue,viewerId:q}):l.createElement(k.q3,null,l.createElement(te.r,{operation:"register",post:d,susiEntry:"report_footer"},"Report this ",X))),l.createElement(R.J,{hidePopover:Ue,creator:I,collection:L,postId:d.id}),l.createElement(ae.U,{hidePopover:Ue,creator:I,viewer:W}),l.createElement(le.U,{hidePopover:Ue,creator:I,viewer:W})):null))}},l.createElement(p.a,{flexGrow:"0",marginRight:"-4px"},l.createElement(F.Z,{ariaControls:dn,ariaExpanded:Be?"true":"false",ariaLabel:"More options",onClick:function(){return $e()},isResponsive:N,tooltipText:"More",testId:y,rules:E})))})))},be=i(49470);function Fe(){return Fe=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var t in i)({}).hasOwnProperty.call(i,t)&&(e[t]=i[t])}return e},Fe.apply(null,arguments)}const Ee=function(e){return l.createElement("svg",Fe({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24"},e),fe||(fe=l.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M22 12c0 5.523-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2s10 4.477 10 10m-13.75-.5a.5.5 0 0 0 0 1h7.5a.5.5 0 0 0 0-1z",clipRule:"evenodd"})))};var Ce=i(43849),we=i(8963),Pe=i(34507),Ae={pointerEvents:"none"};function _e(e){var n=e.hidePopover,i=e.post,t=(0,z.e)(!1),a=(0,o.A)(t,3),d=a[0],r=a[1],s=a[2],m=(0,Pe.K)(i.id),u=m.loading,c=m.showLess,N=m.explicitSignal,S=m.undo,g=m.showUndoToast,f=(0,Ce.$)(),y=f.animateShowLess,h=f.animateUndo,b=N===ce.WN.SHOW_LESS,F=(0,l.useCallback)((function(){b?(S(),g(ce.WN.SHOW_LESS),n(),null==h||h()):(c(),y?(n(),y()):r())}),[c,n,b,S,g,y,h]),E=(0,l.useCallback)((function(){n(),s()}),[n,s]);return l.createElement(l.Fragment,null,l.createElement(k.q3,{loading:u},l.createElement(v.N,{onClick:F,disabled:u,rules:u?Ae:void 0},l.createElement(p.a,{display:"flex"},l.createElement(p.a,{marginRight:"12px",flexShrink:"0"},b?l.createElement(Ee,null):l.createElement(be.A,null)),l.createElement(p.a,{display:"flex",flexDirection:"column",marginTop:"2px",gap:"4px",textAlign:"left"},b?"Undo show":"Show"," less like this")))),l.createElement(k.eS,null),l.createElement(we.b,{isVisible:d,hide:E,post:i}))}var Ie=i(52705),Te=i(10328);function De(e){var n=e.author,i=e.collection,t=(0,ie.J)(null==i?void 0:i.id).viewerEdge,a=(null==n?void 0:n.id)||"",o=(0,C.R)().value,d=o&&a===o.id;return o?l.createElement(l.Fragment,null,!!n&&!d&&l.createElement(k.q3,null,l.createElement(Ie.N,{scale:"S",susiEntry:"follow_post_preview_menu",user:n,isInline:!0,preventParentClick:!0,showSubscribeDialog:!0})),!!i&&!(null!=t&&t.isEditor)&&l.createElement(k.q3,null,l.createElement(Te.W,{scale:"S",susiEntry:"follow_post_preview_menu",collection:i,isInline:!0,preventParentClick:!0,showUnfollow:!0}))):null}function Oe(e){var n=e.post,i=e.isResponsive,a=e.popoverPositioningStrategy,d=e.viewer,r=e.hideOnScroll,s=e.testId,m=e.prependMenuItems,u=e.rules,c=e.showAddToList,v=e.showHideHighlights,p=e.onButtonClick,N=n.id,g=n.creator,f=n.collection,y=(0,z.e)(!1),h=(0,o.A)(y,4),E=h[0],C=h[2],w=h[3],P=(0,l.useCallback)((function(){null==p||p(),w()}),[w,p]),A={kind:ce.Bd.POST,target:n},_=(0,l.useCallback)((function(e,i){return l.createElement(k.Ni,{width:"248px"},m&&l.createElement(l.Fragment,null,m(C)),c&&l.createElement(S,{showAt:c,onClick:e,hidePopover:C,bookmarkIcon:i}),l.createElement(_e,{hidePopover:C,post:n}),v&&l.createElement(b,{hidePopover:C}),l.createElement(T,{post:n,hidePopover:C,showHideHighlights:v}),l.createElement(De,{author:g,collection:f}),l.createElement(k.eS,null),l.createElement(R.J,{creator:g,collection:f,hidePopover:C,postId:N}),l.createElement(se,{postId:N,viewerId:null==d?void 0:d.id,targetUserId:(null==g?void 0:g.id)||"",hidePopover:C}))}),[m,c]);return null!=g&&g.id?l.createElement(D.f,(0,t.A)({},A,{viewer:d}),(function(e){var n=e.onClick,t=e.bookmarkIcon;return l.createElement(ue.A,{isVisible:E,positioningStrategy:a,targetDistance:10,hide:C,popoverRenderFn:function(){return _(n,t)},hideOnScroll:r},l.createElement(F.Z,{onClick:P,ariaLabel:"More options",isResponsive:i,tooltipText:"More",testId:s,rules:u}))})):null}var xe=["showAddToList"];function Re(e){var n=e.showAddToList,i=(0,a.A)(e,xe),o=i.post,d=o.creator,r=o.collection,s=o.visibility,m=(0,C.R)(),u=m.loading,c=m.value,k=(0,ie.J)(null==r?void 0:r.id).viewerEdge,v=!u&&!!c,p=!(null==k||!k.isEditor),N=(null==c?void 0:c.id)===(null==d?void 0:d.id),S=s===ce.dL.UNLISTED?void 0:n;return d&&v?p||N?l.createElement(ye,(0,t.A)({showAddToList:S},i)):l.createElement(Oe,(0,t.A)({viewer:c,showAddToList:S},i)):null}},44929:(e,n,i)=>{i.d(n,{D:()=>v});var t=i(58168),a=i(80045),l=i(96540),o=i(14782),d=i(86527),r=i(99731),s=i(51260),m=i(65550),u=["size","href","children","handleClick","buttonStyle","type","isVisible"],c=["href","children","handleClick"],k=["handleClick","isVisible","children","href"],v=function(e){var n=e.size,i=e.href,o=e.children,d=e.handleClick,r=e.buttonStyle,c=e.type,k=e.isVisible,v=void 0===k||k,g=(0,a.A)(e,u),f=!(0,m.L)(),y=(0,s.IF)(),h=(0,s.au)(),b=(0,l.useCallback)((function(e){null==d||d(e)}),[d]);if(!v)return null;var F=y(new URL(i).pathname),E=null==F?void 0:F.params.postId,C=i;switch(f||(C=E?h("ShowMobileWebEditorRedirectEditStory",{postId:E}):h("ShowMobileWebEditorRedirectNewStory",{})),c){case"link":return l.createElement(p,(0,t.A)({href:C,handleClick:b},g),o);case"button":return l.createElement(S,{buttonStyle:r,size:n,href:C,handleClick:b},o);case"popover":return l.createElement(N,(0,t.A)({isVisible:v,href:C,handleClick:b},g),o)}},p=function(e){var n=e.href,i=e.children,o=e.handleClick,r=(0,a.A)(e,c);return l.createElement(d.N,(0,t.A)({href:n,onClick:o},r),i)},N=function(e){var n=e.handleClick,i=e.isVisible,d=void 0===i||i,r=e.children,s=e.href,m=(0,a.A)(e,k);return d?l.createElement(o.q3,null,l.createElement(p,(0,t.A)({href:s,handleClick:n},m),r)):null},S=function(e){var n=e.href,i=e.size,t=e.buttonStyle,a=e.children,o=e.handleClick;return l.createElement(r.$n,{buttonStyle:t,size:i,href:n,onClick:o},a)}},83573:(e,n,i)=>{i.d(n,{s:()=>t});var t={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"UserReportStoryMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"targetPostId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"targetAuthorId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"alsoBlockAuthor"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"reason"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"reportStoryAndMaybeBlockAuthor"},arguments:[{kind:"Argument",name:{kind:"Name",value:"targetPostId"},value:{kind:"Variable",name:{kind:"Name",value:"targetPostId"}}},{kind:"Argument",name:{kind:"Name",value:"targetAuthorId"},value:{kind:"Variable",name:{kind:"Name",value:"targetAuthorId"}}},{kind:"Argument",name:{kind:"Name",value:"alsoBlockAuthor"},value:{kind:"Variable",name:{kind:"Name",value:"alsoBlockAuthor"}}},{kind:"Argument",name:{kind:"Name",value:"reason"},value:{kind:"Variable",name:{kind:"Name",value:"reason"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"viewerEdge"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"isBlocking"}}]}}]}}]}}]}},17045:(e,n,i)=>{i.d(n,{M:()=>s});var t=i(5544),a=i(95420),l=i(96540),o=i(34317),d=i(91830),r=i(83573);function s(e){var n=e.viewerId,i=e.targetAuthorId,s=e.targetPostId,m=e.onOptimisticComplete,u=(0,d.zF)(),c=(0,o.$L)(),k=(0,a.n)(r.s),v=(0,t.A)(k,1)[0];return(0,l.useCallback)((function(e,t){v({variables:{targetAuthorId:i,targetPostId:s,alsoBlockAuthor:e,reason:t},onCompleted:function(){u({message:"Successfully reported post."}),c.event("post.flagged",{postId:s,reason:t})},onError:function(){u({message:"Unable to report this story. Please try again later."})},optimisticResponse:{__typename:"Mutation",reportStoryAndMaybeBlockAuthor:{__typename:"User",id:i,viewerEdge:{__typename:"UserViewerEdge",id:"userId:".concat(i,"-viewerId:").concat(n),isBlocking:e}}}}),null==m||m()}),[v,n,i,s,m])}},69415:(e,n,i)=>{i.d(n,{g:()=>k,y:()=>v});var t=i(5544),a=i(57746),l=i(96540),o=i(34317),d=i(49287),r=i(91830),s=i(66973),m=(0,l.createContext)({areHighlightsHidden:!1,toggleHideHighlights:function(){return null}}),u=new s.A("post-view-settings"),c="hide-highlights";function k(e){var n=e.postId,i=e.children,s=(0,l.useState)(!!u.get(c)),k=(0,t.A)(s,2),v=k[0],p=k[1],N=(0,r.zF)(),S=(0,o.$L)(),g=(0,d.jI)(),f=(0,l.useCallback)((function(e){u.set(c,e),p(e),S.event("displaySettings.highlights_from_others",{showHighlights:!e,postId:n,source:g})}),[n,g]),y=(0,l.useCallback)((function(){f(!v),N({message:"Highlights from others are ".concat(v?"visible":"hidden"," for you"),toastStyle:"MESSAGE",extraParams:{onClickUndo:function(){return f(v)},hideCloseButton:!0}})}),[v]),h=(0,l.useMemo)((function(){return{areHighlightsHidden:v,toggleHideHighlights:y}}),[v,y]);return(0,l.useEffect)((function(){var e=function(e){(0,a.Ay)("mod+/",e)&&y()};return document.addEventListener("keydown",e),function(){return document.removeEventListener("keydown",e)}}),[y]),l.createElement(m.Provider,{value:h},i)}var v=function(){return(0,l.useContext)(m)}},38714:(e,n,i)=>{i.d(n,{M:()=>t});var t=function(e){return!!e&&(e.isAuroraVisible||"Collection"===e.__typename&&e.isAuroraEligible&&e.viewerEdge.isEditor)}},89142:(e,n,i)=>{i.d(n,{L:()=>r,m:()=>s});var t=i(5544),a=i(95420),l=i(96540),o={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"SetPinnedAtMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"postId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"collectionId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"pinnedAt"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"setPinnedAt"},arguments:[{kind:"Argument",name:{kind:"Name",value:"targetPostId"},value:{kind:"Variable",name:{kind:"Name",value:"postId"}}},{kind:"Argument",name:{kind:"Name",value:"targetCollectionId"},value:{kind:"Variable",name:{kind:"Name",value:"collectionId"}}},{kind:"Argument",name:{kind:"Name",value:"pinnedAt"},value:{kind:"Variable",name:{kind:"Name",value:"pinnedAt"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"pendingCollection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"pinnedAt"}}]}}]}}]}}]},d={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"PostSetPinnedByCreatorAtMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"postId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"isPinned"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"setPostPinnedOnCreatorProfile"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"targetPostId"},value:{kind:"Variable",name:{kind:"Name",value:"postId"}}},{kind:"ObjectField",name:{kind:"Name",value:"isPinned"},value:{kind:"Variable",name:{kind:"Name",value:"isPinned"}}}]}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}}]}}]}}]},r=function(e){var n=e.id,i=e.collection,d=e.pendingCollection,r=e.pinnedAt,s=(i||d||{id:""}).id,m=(0,a.n)(o,{optimisticResponse:{__typename:"Mutation",setPinnedAt:{__typename:"Post",id:n,collection:i,pendingCollection:d,pinnedAt:r?0:Date.now()}}}),u=(0,t.A)(m,1)[0],c=l.useCallback((function(){return u({variables:{postId:n,collectionId:s,pinnedAt:!r}})}),[n,s,r,u]);return[r,c]},s=function(e){var n=e.id,i=e.pinnedByCreatorAt,o=(0,a.n)(d,{optimisticResponse:{setPostPinnedOnCreatorProfile:{__typename:"MutationSuccess"}},update:function(e,t){var a;"MutationSuccess"===(null===(a=t.data)||void 0===a?void 0:a.setPostPinnedOnCreatorProfile.__typename)&&e.modify({id:"Post:".concat(n),fields:{pinnedByCreatorAt:function(){return i?0:Date.now()}}})}}),r=(0,t.A)(o,1)[0],s=l.useCallback((function(){return r({variables:{postId:n,isPinned:!i}})}),[n,r,i]);return[i,s]}},32038:(e,n,i)=>{i.d(n,{T:()=>a,e:()=>t});var t="This story is also a response to another story. Are you sure you want to delete this story?",a="This story is also a response to another story. Any edits are applied to both."},55981:(e,n,i)=>{i.d(n,{n:()=>d});var t=i(96540),a=i(44402),l=i(1417),o=function(e){return{"& path":{fill:e.colorTokens.foreground.error.primary.base}}},d=function(){var e=(0,a.l)();return t.createElement(l.A,{className:e(o)})}}}]);
//# sourceMappingURL=https://stats.medium.build/lite/sourcemaps/9347.bbdd0249.chunk.js.map