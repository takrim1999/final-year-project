"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[7975],{57975:(e,n,i)=>{i.d(n,{W:()=>z});var a=i(64467),t=i(96540),l=i(74346),d=i(26557),o=i(22213),s=i(69650),r=i(12600),u=i(72541),m=i(11828),k=i(80182),c=i(80074),p=i(27721),v=i(1722),S=i(19228),N=i(43634),F=i(34317),g=i(49287),b=i(56743),f=i(75599),y=i(39160),h=i(51771),C=i(46879),w=i(17745),O=i(32318),_=i(80045),E=i(95964),D=i(52705),V=i(14281),T=i(1037),I=i(22541),P={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"PostVotersDialogQuery"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"postId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"pagingOptions"}},type:{kind:"NamedType",name:{kind:"Name",value:"PagingOptions"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"post"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"postId"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"title"}},{kind:"Field",name:{kind:"Name",value:"clapCount"}},{kind:"Field",name:{kind:"Name",value:"voterCount"}},{kind:"Field",name:{kind:"Name",value:"voters"},arguments:[{kind:"Argument",name:{kind:"Name",value:"paging"},value:{kind:"Variable",name:{kind:"Name",value:"pagingOptions"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"AuthorFollowSubscribeButton_user"}},{kind:"FragmentSpread",name:{kind:"Name",value:"UserInListDialog_user"}}]}},{kind:"Field",name:{kind:"Name",value:"clapCount"}}]}},{kind:"Field",name:{kind:"Name",value:"pagingInfo"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"next"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"page"}}]}}]}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"AuthorFollowSubscribeButton_post"}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"SignInOptions_user"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"imageId"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"SignUpOptions_user"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"imageId"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"SusiModal_user"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"SignInOptions_user"}},{kind:"FragmentSpread",name:{kind:"Name",value:"SignUpOptions_user"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"useNewsletterV3Subscription_newsletterV3"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"NewsletterV3"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"type"}},{kind:"Field",name:{kind:"Name",value:"slug"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"slug"}}]}},{kind:"Field",name:{kind:"Name",value:"user"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"username"}},{kind:"Field",name:{kind:"Name",value:"newsletterV3"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"useNewsletterV3Subscription_user"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"username"}},{kind:"Field",name:{kind:"Name",value:"newsletterV3"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"useNewsletterV3Subscription_newsletterV3"}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"useAuthorFollowSubscribeButton_user"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"FragmentSpread",name:{kind:"Name",value:"useNewsletterV3Subscription_user"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"useAuthorFollowSubscribeButton_newsletterV3"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"NewsletterV3"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"FragmentSpread",name:{kind:"Name",value:"useNewsletterV3Subscription_newsletterV3"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"userUrl_user"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"customDomainState"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"live"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"domain"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"hasSubdomain"}},{kind:"Field",name:{kind:"Name",value:"username"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"UserAvatar_user"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"imageId"}},{kind:"Field",name:{kind:"Name",value:"membership"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"tier"}}]}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"username"}},{kind:"FragmentSpread",name:{kind:"Name",value:"userUrl_user"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"SusiModal_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"AuthorFollowSubscribeButton_user"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"imageId"}},{kind:"FragmentSpread",name:{kind:"Name",value:"SusiModal_user"}},{kind:"FragmentSpread",name:{kind:"Name",value:"useAuthorFollowSubscribeButton_user"}},{kind:"Field",name:{kind:"Name",value:"newsletterV3"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"useAuthorFollowSubscribeButton_newsletterV3"}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"UserInListDialog_user"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"username"}},{kind:"Field",name:{kind:"Name",value:"bio"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"FragmentSpread",name:{kind:"Name",value:"userUrl_user"}},{kind:"FragmentSpread",name:{kind:"Name",value:"UserAvatar_user"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"AuthorFollowSubscribeButton_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"SusiModal_post"}}]}}]},A=["__typename"];function j(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,a)}return i}function L(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?j(Object(i),!0).forEach((function(n){(0,a.A)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):j(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}var U=10,x=function(e){var n=e.post,i=e.hide,a=e.isVisible,l=e.fetchMore,d=e.loading;if(!n)return null;var o=n.title,s=n.voters,r=n.clapCount,u=n.voterCount;return t.createElement(T.X,{isVisible:a,fetchMore:l,loading:d,hide:i,title:o,clapCount:null!=r?r:0,voterCount:null!=u?u:0,voters:s?s.items.map((function(e,i){var a=e.user,l=e.clapCount;return a&&t.createElement(g.Ne,{source:{name:"post_clappers",postId:n.id,index:i},key:a.id},t.createElement(V.B,{user:a,followButton:t.createElement(D.N,{user:a,post:n,scale:"S",susiEntry:"follow_list"}),badge:t.createElement(I._,{clapCount:l})}))})):null})};function B(e){var n,i=e.postId,a=e.isVisible,l=e.hide,d=(0,E.IT)(P,{variables:{postId:i,pagingOptions:{limit:U}},ssr:!1,notifyOnNetworkStatusChange:!0}),o=d.data,s=(o=void 0===o?{}:o).post,r=d.loading,u=d.error,m=d.fetchMore;if(u||null==s||!s.voters)return null;var k=s.voters.pagingInfo&&s.voters.pagingInfo.next;if(k){k.__typename;var c=(0,_.A)(k,A);n=function(){return m({variables:{pagingOptions:L(L({},c),{},{limit:U})}})}}return t.createElement(x,{hide:l,fetchMore:n,post:s,isVisible:a,loading:r})}var H=i(5600),M=i(85864);function R(e){var n=e.clapCount,i=e.hasLabel,a=void 0!==i&&i,l=e.showFullNumber,d=void 0!==l&&l,o=e.post,s=e.hasDialog,r=void 0!==s&&s,u=e.shouldShowResponsiveLabelText,m=void 0!==u&&u,k=e.shouldHideClapsText,c=void 0!==k&&k,p=e.countColor,v=e.countScale,S=e.isLoading,N=void 0!==S&&S,F=o.id;if(!(n>0||N))return null;var g=function(e){var i=e.showVoters;return t.createElement(O.q,{showVoters:i,hasLabel:a,showFullNumber:d,shouldShowResponsiveLabelText:m,shouldHideClapsText:c,clapCount:n,countColor:p,countScale:v,isLoading:N})};return r&&F&&!N?t.createElement(M.B,null,(function(e){var n=e.isVisible,i=e.show,a=e.hide;return t.createElement(t.Fragment,null,t.createElement(H.G,{tooltipText:"View Claps",targetDistance:15,showOnChildFocus:!1},t.createElement(g,{showVoters:i})),n&&t.createElement(B,{isVisible:!0,hide:a,postId:F}))})):t.createElement(g,null)}var q=i(11517);function K(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,a)}return i}function X(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?K(Object(i),!0).forEach((function(n){(0,a.A)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):K(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}var Y=function(e){var n,i=e.post,a=e.buttonStyle,O=e.hasDialog,_=e.shouldShowResponsiveLabelText,E=void 0!==_&&_,D=e.shouldHideClapsText,V=void 0!==D&&D,T=e.shouldHideClapsCount,I=void 0!==T&&T,P=e.susiEntry,A=e.verticalClapsText,j=void 0!==A&&A,L=e.buttonColor,U=e.countScale,x=e.testId,B=(0,q.N)({post:i}),H=B.clapCount,M=B.clapCountLoading,K=X(X({},i),{},{clapCount:H}),Y=(0,w.f)(),z=(0,p.R)(),G=z.value,Q=z.loading,W=null!==(n=null==G?void 0:G.id)&&void 0!==n?n:"",$=(0,v.h)(i).viewerEdge,J=(0,y.d4)((function(e){return e.config.authDomain})),Z=(0,y.Dy)((function(e){return e.multiVote.clapsPerPost})),ee=(0,f.w)(),ne=(0,F.$L)(),ie=(0,g.jI)(),ae=(0,h.F)(Z,K,$),te=ae.clapCount,le=ae.viewerClapCount,de=ae.viewerHasClappedSinceFetch,oe=(0,t.useCallback)((function(){if(le&&le>=k.et)return"Viewer exceeded authorized claps limit.";var e;e={postId:i.id,clapCount:te+1,viewerClapCount:le+1,viewerHasClappedSinceFetch:!0},ee((0,b.K7)(e))}),[le,i.id,te]),se=(0,t.useCallback)((function(e){Y(K,W,e,$),ne.event("post.clientUpvote",{postId:i.id,postIds:[i.id],voteCount:e,source:ie})}),[i.id,W,$,ie]),re=(0,c.s)({onIncrementClaps:oe,onSubmitClapsAccumulated:se}),ue=re.clappedAt,me=re.onFloatEnd,ke=re.removeBurst,ce=re.clap,pe=re.isPopping,ve=re.isShowingViewerClapCount,Se=re.burstOffsets,Ne=re.onPopEnd;(0,t.useEffect)((function(){return function(){var e;e={postId:i.id},ee((0,b.dy)(e))}}),[]);var Fe,ge=i.collection,be=i.creator,fe=i.id,ye=i.isPublished,he=i.isLimitedState,Ce=(Fe=!(!be||be.id!==W),he?"This feature is temporarily disabled":ye?Fe?"You cannot applaud your own story":void 0:"You cannot applaud a draft"),we=(0,k.vP)(a,E),Oe=we.alwaysShowClapsLabel,_e=we.hasClapsLabel,Ee=we.buttonScale,De=!!(le&&le>0),Ve=!!(te&&te>0),Te=ge&&ge.slug?(0,C.jXU)(J,ge.slug,fe):(0,C.A4e)(J,fe);return t.createElement(o.R,{verticalClapsText:j},t.createElement(r.O,{buttonStyle:a,hasClaps:Ve||M},W||Ce?t.createElement(t.Fragment,null,ve&&t.createElement(S.Cq,null,t.createElement(s.u,{count:le,clappedAt:ue,onFloatEnd:me})),t.createElement(m.s,{isPopping:pe,onPopEnd:Ne},t.createElement(d.g,{buttonColor:L,disableReason:Ce,isFilled:De,isLoading:Q||M,onClickAndHold:ce,scale:Ee,shouldHideClapsText:V,testId:x})),Se.map((function(e){return t.createElement(l.S,{key:e,offset:e,onBurstEnd:ke})}))):t.createElement(N.r,{operation:"register",post:i,user:i.creator||void 0,actionUrl:Te,susiEntry:P,testId:x},t.createElement(d.g,{scale:Ee,buttonColor:L,shouldHideClapsText:V,testId:x}))),(Ve||M)&&!I&&(!ve||Oe)&&t.createElement(u.T,{buttonStyle:a},t.createElement(R,{post:i,clapCount:te,showFullNumber:de,hasLabel:_e,hasDialog:O,shouldShowResponsiveLabelText:E,shouldHideClapsText:V,countColor:L,countScale:U,isLoading:M})))},z=function(e){var n;return t.createElement(g.Ne,{source:{postId:null===(n=e.post)||void 0===n?void 0:n.id},extendSource:!0},t.createElement(Y,e))}}}]);
//# sourceMappingURL=https://stats.medium.build/lite/sourcemaps/7975.3f8d607c.chunk.js.map