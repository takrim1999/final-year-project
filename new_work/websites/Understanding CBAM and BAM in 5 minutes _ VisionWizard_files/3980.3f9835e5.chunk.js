"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[3980],{93694:(e,n,a)=>{a.d(n,{Kb:()=>o,Lk:()=>r,y2:()=>d});var i=a(96540),t=a(27049);function d(e){return i.useMemo((function(){return Object.keys(e).reduce((function(n,a){var i=e[a];return n[i]&&n[i].push(a),n}),{S:[],M:[],L:[]})}),[e])}function r(e,n){return{xs:e[n.xs],sm:e[n.sm],md:e[n.md],lg:e[n.lg],xl:e[n.xl]}}function o(e){var n={};for(var a in t.i)n[a]=e;return n}},6054:(e,n,a)=>{a.d(n,{e:()=>m});var i=a(96540),t=a(77865),d=a(90280),r=a(52290),o=a(90383),l=a(49118),c=a(93694);function u(e,n){return e.includes(n)?"block":"none"}function s(e){return e?Math.round(e):e}var f=function(e,n,a,i,t){return function(r){var o,l,c=null!==(o=s(n))&&void 0!==o?o:50,u=null!==(l=s(a))&&void 0!==l?l:50,f="string"==typeof e?d.au[e]:{xs:d.au[e.xs],sm:d.au[e.sm],md:d.au[e.md],lg:d.au[e.lg],xl:d.au[e.xl]};return{width:"100%",borderRadius:t?"2px":void 0,aspectRatio:i?void 0:f,objectFit:"cover",objectPosition:"".concat(c,"% ").concat(u,"%"),backgroundColor:r.colorTokens.background.neutral.tertiary.base,height:i}}};function m(e){var n=e.post,a=e.scales,s=e.aspectRatio,m=void 0===s?d.l8.ThreeToTwo:s,b=e.miroImgFetchedWidth,v=e.webp,k=e.freezeGifs,p=void 0!==k&&k,y=e.imgLoading,g=void 0===y?t.u.LAZY:y,w=e.height,S=e.hasBorderRadius,P=(0,c.y2)(a),N=n.previewImage,h=n.title,O=(0,l.w)(n),F=(0,o.rP)({miroId:O,width:b,strategy:o.qY.Resample,freezeGifs:p,webp:!!v}),E=(null==N?void 0:N.alt)||h||"",_=f(m,null==N?void 0:N.focusPercentX,null==N?void 0:N.focusPercentY,w,S);return i.createElement("div",{"aria-label":E||"Post Preview Image"},Object.keys(P).map((function(e){var n=P[e];return n.length?i.createElement(r.a,{display:{xs:u(n,"xs"),sm:u(n,"sm"),md:u(n,"md"),lg:u(n,"lg"),xl:u(n,"xl")},key:"grid-image-".concat(e)},i.createElement(t._,{src:F,alt:E,rules:_,loading:g})):null})))}},49118:(e,n,a)=>{function i(e,n){(null==n||n>e.length)&&(n=e.length);for(var a=0,i=Array(n);a<n;a++)i[a]=e[a];return i}a.d(n,{w:()=>d});var t=["0ab714002e199418d55d87487144d5e179db39b122aab2b2d49f24985a2e3268","91b4cb73a944e1d27d5b9c057d310030c6cc236b371df86464ea194b87159845","110c09ba4444e338d29ed74adb04b0bf053357845c57c64219ba0655d653a4cd","319daec016b12da748373d51bd9d27c727580bba9947096fe89b8e2efb8e03a6","56439e068a17200d733d148d8933d55501ac9dcc329a6f86272aeffc8ceb50a8","eca3d3b5fb936ab346077b194b08a6b17f33c89eb76924469d110fa41d232cd3","8e14c4381c6099d3ecf0f402666d596f5a6456be8a58343bf4d85acc567ba803","253d1ac7271c0a7cc8f41cd8f9de7fb7148297ef9c17b11e085fd6559557c22b","c8790a6ac4cec21263a79305da5e27032b2811c3bb5ebcbf60bd0ade41026a5c","50814f8da5bf3f0ecc414d5eeed8d40c98aa4a8f5a133d5030317044aa59e3b2","7280ed8cf2fe1568aa4891c4276068a914da03949aa4a328b4fd77614007fdbb","9aee695f83669503f97d9ca29d89942a49664c4fc27bb4f2faa3638390ceff5c","0d702cbfe9920e00e94464660874e97b36b08e18a7844ad35d0d5cd2de2ef897","a8ce0cea4b9fef8a54ce3f0bb96f7de702490ca0eded890b5bee29316727e477","ab32eb8461142e4884d537415df41ea7072e7447c63d9235e135dc2b6dfb3a94","bed282702cab068e73fed54f4f2476879d8beed14768d4a3cb7cf4d5e0cabebe","5f1f586cc41943becdefc4cf716f5e4d75f28bf980a0168ac5279df3fcf6dd00","bb187a1ebc430cb35e482a9757f2d15e8c83f5f7c5fab166e9004ce841008094","3b073f7105bcb0070d5bd9098b373c2a23f26adebfa1e78a98950176da972768","86f133e4424c43290199ce3727b65dccd9b29f2f1e6c8257a6abb6d021f45020"];function d(e){var n;if(null!==(n=e.previewImage)&&void 0!==n&&n.id)return e.previewImage.id;var a=function(e){var n,a=0,t=function(e,n){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,n){if(e){if("string"==typeof e)return i(e,n);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?i(e,n):void 0}}(e))||n&&e&&"number"==typeof e.length){a&&(e=a);var t=0,d=function(){};return{s:d,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:d}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,l=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return o=e.done,e},e:function(e){l=!0,r=e},f:function(){try{o||null==a.return||a.return()}finally{if(l)throw r}}}}(e);try{for(t.s();!(n=t.n()).done;)a=(a<<5)-a+n.value.charCodeAt(0),a|=0}catch(e){t.e(e)}finally{t.f()}return Math.abs(a)}(e.id);return t[a%t.length]}},80876:(e,n,a)=>{a.d(n,{i:()=>c});var i=a(5544),t=a(95420),d=a(96540),r=a(91586),o=a(91830),l={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"UpdatePostPaywall"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"postId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"hasPaywall"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"setPostMonetizationSettings"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"postId"},value:{kind:"Variable",name:{kind:"Name",value:"postId"}}},{kind:"ObjectField",name:{kind:"Name",value:"hasPaywall"},value:{kind:"Variable",name:{kind:"Name",value:"hasPaywall"}}}]}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"UpdatePostPaywall_post"}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"UpdatePostPaywall_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"isLocked"}}]}}]},c=function(e){var n=e.postId,a=e.isPaywalled,c=e.showToast,u=void 0===c||c,s=(0,o.zF)(),f=(0,r.U)(),m=(0,d.useCallback)((function(){return s({message:d.createElement(d.Fragment,null,"There was an error ",a?"removing":"adding"," the paywall. Please try again later."),toastStyle:"ERROR"})}),[s,a]),b=function(e,a){e.modify({id:e.identify({__typename:"Post",id:n}),fields:{isLocked:function(){return a}}})},v=function(e,n){u&&s({message:e?"Paywall added.":"Paywall removed.",extraParams:{hideCloseButton:!0,onClickUndo:function(){n()}}})},k=(0,t.n)(l,{variables:{postId:n,hasPaywall:!0},update:function(e,n){var a,i=n.data;"Post"===(null==i||null===(a=i.setPostMonetizationSettings)||void 0===a?void 0:a.__typename)&&b(e,!0)},onCompleted:function(e){var n;"Post"===(null==e||null===(n=e.setPostMonetizationSettings)||void 0===n?void 0:n.__typename)?v(!0,P):m()},onError:function(e){f.error({message:"UpdatePostPaywall: Add paywall GraphQL query failed",postId:n,error:e}),m()}}),p=(0,i.A)(k,2),y=p[0],g=p[1].loading,w=(0,t.n)(l,{variables:{postId:n,hasPaywall:!1},update:function(e,n){var a,i=n.data;"Post"===(null==i||null===(a=i.setPostMonetizationSettings)||void 0===a?void 0:a.__typename)&&b(e,!1)},onCompleted:function(e){var n;"Post"===(null==e||null===(n=e.setPostMonetizationSettings)||void 0===n?void 0:n.__typename)?v(!1,y):m()},onError:function(e){f.error({message:"UpdatePostPaywall: Remove paywall GraphQL query failed",postId:n,error:e}),m()}}),S=(0,i.A)(w,2),P=S[0],N=S[1].loading;return{addPaywall:y,removePaywall:P,updatingPaywall:g||N}}},47016:(e,n,a)=>{a.d(n,{G:()=>d});var i=a(95964),t={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"useViewerCanPaywallQuery"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"viewer"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"partnerProgramEnrollment"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"permissions"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"canUsePaywall"}}]}}]}}]}}]}}]},d=function(){var e,n,a,d=(0,i.IT)(t),r=d.data,o=d.loading;return{canUsePaywall:null==r||null===(e=r.viewer)||void 0===e||null===(n=e.partnerProgramEnrollment)||void 0===n||null===(a=n.permissions)||void 0===a?void 0:a.canUsePaywall,loading:o}}},74163:(e,n,a)=>{a.d(n,{g:()=>o});var i=a(95964),t=a(46473),d={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"PublicationViewerEdge"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"ref"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"PublicationRef"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"publication"},name:{kind:"Name",value:"publicationByRef"},arguments:[{kind:"Argument",name:{kind:"Name",value:"ref"},value:{kind:"Variable",name:{kind:"Name",value:"ref"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Publication"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"viewerEdge"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"Publication_viewerEdge"}}]}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"Publication_viewerEdge"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PublicationViewerEdge"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"viewerStaffRole"}}]}}]},r=a(89536),o=function(e){var n=function(e){var n,a=(0,t.HG)(),r=(0,i.IT)(d,{variables:{ref:{slug:null!=e?e:""}},ssr:!a,skip:!e}),o=r.loading,l=r.error,c=r.data;return o?{loading:o}:l?{error:l}:{viewerEdge:null==c||null===(n=c.publication)||void 0===n?void 0:n.viewerEdge}}(e),a=n.viewerEdge;return{loading:n.loading,isWriter:(0,r.aQ)(a),isOwner:(0,r.sC)(a),isEditor:(0,r.os)(a),isOwnerOrEditor:(0,r.KT)(a)}}},91586:(e,n,a)=>{a.d(n,{U:()=>c});var i=a(64467),t=a(96540),d=a(39160),r=a(47517);function o(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),a.push.apply(a,i)}return a}function l(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?o(Object(a),!0).forEach((function(n){(0,i.A)(e,n,a[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))}))}return e}var c=function(){var e=(0,t.useRef)(new Set).current,n=(0,d.d4)((function(e){return e.client.hydrated})),a=(0,t.useCallback)((function(a,i,t){var d=function(e,n,a){return JSON.stringify(l({logFnName:e},"string"==typeof n?{message:n}:l(l({},n),{},{message:a})))}(a,i,t);n&&!e.has(d)&&(function(e,n,a){"string"==typeof n?r.vF[e](n):r.vF[e](n,a)}(a,i,t),e.add(d))}),[n,e]);return l(l({},r.vF),{},{debugClientOnce:(0,t.useCallback)((function(e,n){a("debug",e,n)}),[a]),infoClientOnce:(0,t.useCallback)((function(e,n){a("info",e,n)}),[a]),warnClientOnce:(0,t.useCallback)((function(e,n){a("warn",e,n)}),[a]),errorClientOnce:(0,t.useCallback)((function(e,n){a("error",e,n)}),[a])})}},89536:(e,n,a)=>{a.d(n,{KT:()=>o,aQ:()=>t,os:()=>d,sC:()=>r});var i=a(42976),t=function(e){return(null==e?void 0:e.viewerStaffRole)===i.LN.WRITER},d=function(e){return(null==e?void 0:e.viewerStaffRole)===i.LN.EDITOR},r=function(e){return(null==e?void 0:e.viewerStaffRole)===i.LN.OWNER},o=function(e){return d(e)||r(e)}}}]);
//# sourceMappingURL=https://stats.medium.build/lite/sourcemaps/3980.3f9835e5.chunk.js.map